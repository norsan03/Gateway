<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>

 	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <title>Wallapop - Perfil</title>

        <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" href="../../css/bootstrap.min.css" />
		<link rel="stylesheet" th:href="@{/css/style.css}" href="../../css/style.css" />
		<script th:href="@{/js/jquery.min.js}" src="../../js/jquery.min.js"></script>
		<script th:href="@{/js/bootstrap.min.css}" src="../../js/bootstrap.min.js"></script>
		
		<script>
	
		function validate() {
			
			/*Validacion Nombre*/
				var n = document.forms["Form"]["nombre"].value;
				if (n==null || n=="") {
					alert("Por favor escriba su nombre");
				return false;
				}
			
			/*Validacion Apellidos*/
				var a = document.forms["Form"]["apellidos"].value;
				if (a==null || a=="") {
					alert("Por favor escriba sus apellidos");
				return false;
				}
				
				/*Validacion Email*/
				var e = document.forms["Form"]["email"].value;
			
				if (e==null || e=="") {
					alert("Por favor introduzca su mail");
				return false;
				}
				
				var expr = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
				
				if (!expr.test(e)){
				alert("Introduce una direccion de correo valido con este formato: nombre@dominio.extension");
					return false;
				}
				
				/*Validacion contraseña*/
				/*Se comprueba si se ha introducido algo*/
				var p1 = document.getElementById("clave").value;
				if (p1==null || p1=="") {
					alert("Por favor introduzca su contraseña");
				return false;
				}
				
				var patron=/^[0-9a-zA-Z]{1,8}$/;
				if ((patron.test(p1))==false){
				alert("Por favor introduzca una contraseña valida.Se permite un maximo de 8 caracteres y los validos son letras de la [a-z] y digitos del[0-9]");
				return false;
				}
				
				/*Validacion Ciudad*/
				var f = document.forms["Form"]["ciudad"].value;
				if (f==null || f=="") {
					alert("Por favor rellene su ciudad");
				return false;
				}
				
				/*Envio correcto*/
				alert("Se ha modificado su perfil correctamente");
				return true;
					
			}
				
				
		</script>
		
		<script>
		function logout (){
			alert("Se ha cerrado su sesion.");
			
		}
		
		function borrar (){
			confirm("¿Esta seguro de que quiere realizar esta accion? Confirme el borrado.");
			
		}
		
		</script>

  </head>

  <body>





    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" style="padding: 7px;"><img th:src="@{https://lh3.googleusercontent.com/eiHGogXLz3iBRZhKrdr7FOkw6q5P_iuGSwqGWmd1yRzMcc-B7V6xIKR9wzuqDrD61K4=w300}" th:alt="Wallapop" th:height="38" th:width="38" /></a> 
        <a class="navbar-brand" th:href="@{/home}">Wallapop TIW</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-left">
              <li><a th:href="@{/home}"><span class="glyphicon glyphicon-home"></span> Home</a></li>
              <li><a th:href="@{/misProductos}"><span class="glyphicon glyphicon-list-alt"></span> Mis productos</a></li>
              <li class="active"><a th:href="@{/Perfil}"><span class="glyphicon glyphicon-user"></span> Mi perfil</a></li>
              <li><a th:href="@{/bandejaEntrada}"><span class="glyphicon glyphicon-user"></span> Buzon Mensajes</a></li>
              
            </ul>
           <ul class="nav navbar-nav navbar-right">
			<li><a th:href="@{/cerrarSesion}" onclick="return logout()"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>            </ul> 
        </div><!--/.navbar-collapse -->
      </div>
    </nav>

    <nav class="navbar">

      <ol class="breadcrumb" style="background-color: #23C5B2; color: white">
        <li><a href="#" style="color: black"><b>Home</b></a></li>
        <li><a href="Perfil.jsp" style="color: white" ><b><i>Mi Perfil</i></b></a></li>
      </ol>

    </nav>


		
   <div class="container well">
   
		<h2>Tu Perfil de Usuario</h2>
		<h3>Bienvenido <span th:text="${uLogueado.email}">nombre</span></h3>

    <form th:action="@{/EditarPerfil}" th:object="${usuario}" class="form-signin" method="post" name="Form">
		<fieldset>
			<legend>Formulario de Edición de Usuarios</legend>

			<label for="nom">Nombre:</label> <input type="text" name="nombre"
				id="nom" th:value="${uLogueado.nombre}"/><br></br> 
			<label for="apellidos">Apellidos:</label> <input type="text" name="apellidos"
				id="apellidos" th:value="${uLogueado.apellidos}"  /><br></br> 
            <label for="email">Email:</label> <input type="text" name="email"
				id="email" th:value="${uLogueado.email}"  /><br></br> 
			 <label for="ciudad">Ciudad:</label> <input type="text" name="ciudad"
				id="ciudad" th:value="${uLogueado.ciudad}"  /><br></br> 
			<label for="clave">Password:</label> <input
				type="password" name="password" id="clave" th:value="${uLogueado.password}"/>
				
		</fieldset>
		<input type="submit" onclick="return validate()" value="Modificar"/>

	</form>
	<td><a href="#" onclick="return borrar()">Borrar</a></td>

                               
         </div>
     
<footer style="background-color: #555;
      color: white;
      padding: 15px;">
        <p>&copy; 2016 Company, Inc.</p>
      </footer>


  </body>
</html>